---
title: "ã€Flutterã€‘fast_i18nã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€i18nã€‘"
emoji: "ğŸ‡ºğŸ‡³"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["flutter", "dart", "i18n"]
published: true
---

## ã¯ã˜ã‚ã«

fast_i18nã¯ã€Flutterã®å›½éš›åŒ–ï¼ˆi18nï¼‰ã‚’ç°¡å˜ã«è¡Œã†ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚`flutter_localizations`ã¨é•ã„ã€`context`ãŒä¸è¦ãªã®ãŒç‰¹å¾´ã§ã™ã€‚

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### Packageã‚’è¿½åŠ 

```bash
flutter pub add -d fast_i18n build_runner
```

### `i18n`ãƒ•ã‚©ãƒ«ãƒ€ã®ä½œæˆ

```bash
mkdir lib/i18n
```

### JSONãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ

`lib/i18n`ãƒ•ã‚©ãƒ«ãƒ€ã«jsonã‚’ä½œæˆã—ã¾ã™ã€‚ãƒ•ã‚¡ã‚¤ãƒ«åã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

```plane
<namespace>_<locale?>.i18n.json
```

`<namespace>`ã¯è‡ªç”±ã«æ±ºã‚ã‚‰ã‚Œã¾ã™ã€‚ã“ã“ã§ã¯`translations`ã«ã—ã¦ãŠãã¾ã™ã€‚
`<locale>`ã«ã¯è¨€èªåãŒå…¥ã‚Šã¾ã™ã€‚ã—ã‹ã—ã€è‹±èªã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯`<locale>`ã‚’çœç•¥ã—ã¦ãã ã•ã„ã€‚

ä»Šå›ã¯ã€æ—¥æœ¬èªã¨è‹±èªã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã“ã¨ã¨ã—ã¾ã™ã€‚

```plane
lib
â”œâ”€â”€ i18n
â”‚Â Â  â”œâ”€â”€ translations.i18n.json
â”‚Â Â  â””â”€â”€ translations_ja.i18n.json
â””â”€â”€ main.dart
```

```json:translations.i18n.json
{
  "hello": "hello"
}
```

```json:translations_ja.i18n.json
{
  "hello": "ã“ã‚“ã«ã¡ã¯"
}
```

### dartãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¸ã‚§ãƒãƒ¬ãƒ¼ãƒˆ

```bash
flutter pub run build_runner build --delete-conflicting-outputs
```

JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ãŸéš›ã¯ã€å†åº¦å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

### `main.dart`ã®ç·¨é›†

```dart:main.dart
void main() {
  WidgetsFlutterBinding.ensureInitialized(); // è¿½åŠ 
  LocaleSettings.useDeviceLocale(); // è¿½åŠ 
  runApp(MyApp());
}
```

### `flutter_localizations`ã®è¨­å®š

`fast_i18n`ã§ã‚‚`flutter_localizations`ã®è¨­å®šã‚’ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã‚ˆã†ã§ã™ã€‚

#### `pubspec.yaml`ã«`flutter_localizations`ã‚’è¿½åŠ 

```yaml:pubspec.yaml
dependencies:
  flutter:
    sdk: flutter
  flutter_localizations: # è¿½åŠ 
    sdk: flutter # è¿½åŠ 
```

#### `main.dart`ã®ç·¨é›†

```dart:main.dart
void main() {
  WidgetsFlutterBinding.ensureInitialized();
  LocaleSettings.useDeviceLocale();
  runApp(TranslationProvider(child: MyApp()));
}
```

#### `MaterialApp`ã®ç·¨é›†

```dart:main.dart
MaterialApp(
  locale: TranslationProvider.of(context).flutterLocale,
  supportedLocales: LocaleSettings.supportedLocales,
  localizationsDelegates: GlobalMaterialLocalizations.delegates,
  child: YourFirstScreen(),
)
```

### iOSã®è¨­å®š

iOSã«å¯¾å¿œã™ã‚‹ã«ã¯å€‹åˆ¥ã®è¨­å®šãŒå¿…è¦ã§ã™ã€‚
`ios/Runner/Info.plist`ã‚’ç·¨é›†ã—ã¾ã™ã€‚
`<dict>`ä¸­ã«ä»¥ä¸‹ã®ã‚ˆã†ã«è¿½è¨˜ã—ã¾ã™ã€‚

```xml:ios/Runner/Info.plist
<key>CFBundleLocalizations</key>
<array>
<string>ja</string>
<string>en</string>
</array>
```

ä»¥ä¸Šã§ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨è¨­å®šã¯å®Œäº†ã§ã™ã€‚

## ä½¿ã„æ–¹

ç¿»è¨³ãƒ‡ãƒ¼ã‚¿ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«å–å¾—ã—ã¾ã™ã€‚

```dart
import 'package:my_app/i18n/translations.g.dart';

String hello = t.hello;
```

## å‚è€ƒ

@[card](https://pub.dev/documentation/fast_i18n/latest/)
